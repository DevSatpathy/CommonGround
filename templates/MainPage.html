<!doctype html>
<html>
        <head>
            <link rel="shortcut icon" href="../frontend/static/favicon.ico">
    
            <title>CommonGround</title>
            <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
            <meta charset="utf-8">
            <link rel="stylesheet" type="text/css" href="../frontend/static/favicon.ico">
            <link rel="stylesheet" type="text/css" href="../frontend/static/style.css">
   
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
            <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>

            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>


        </head>
        <body id = "overall" style="border-style: dashed">
            <div id = "sitenameholder" class="jumbotron" style="margin-bottom:0" >
                <h1 id = "sitename">CommonGround</h1>
            </div>

            <div>
                <p>Need to find a place to meet? Get in a virtual room with all the people you want to meet, send your location, and our algorithm will determine the best place
                   to meet. If you would like to create a room, press the button below.
                </p> 
            </div>
     
            <div style="text-align:center">
                <button type="button" class="btn", onclick="myFunction()">Create Room</button>
                <a href = "JoinRoom.html"><button type="button" class="btn">Join Room</button></a>
            </div>
          

            <div id="googleMap" style="width:100%;height:400px;"></div>

        <script>
        /* Var x and Var y serve as place holders until json works */  
        var standardMap = L.map('googleMap').setView([40.1164, -88.2434], 13);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiYmoxOSIsImEiOiJjanNoeHF6dTQwd2VrNGF0N3VpYjBhNmVlIn0.DkwEg5jiRyQFqZ-Xe98o-Q', {
		    maxZoom: 18,
		    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			  '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			  'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		    id: 'mapbox.streets'
	      }).addTo(standardMap);
        </script>

            <div>
                <!-- AXP -->
                <p id="demo"></p>
            </div>

        <script>
            var x = document.getElementById("demo");
            var x_user = null;
            var y_user = null;

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(displayPos, reqRejected);
                } else {
                    x.innerHTML = "Geolocation is not supported by this browser/";
                }
            }

            function displayPos(position) {
                x.innerHTML = "Your Latitude: " + position.coords.latitude +
                    "<br>Your Longitude: " + position.coords.longitude;
                x_user = position.coords.latitude;
                y_user = position.coords.longitude;
            }
            function reqRejected(error) {
                var errormsg = document.getElementById("errormsg");

                switch (error.code) {
                    case error.PERMISSION_DENIED:
                        errormsg.innerHTML = "This application requires your location, please refresh to continue and accept."
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errormsg.innerHTML = "Location information is unavailable."
                        break;
                    case error.TIMEOUT:
                        errormsg.innerHTML = "The request to get user location timed out."
                        break;
                    case error.UNKNOWN_ERROR:
                        errormsg.innerHTML = "An unknown error occurred."
                        break;
                }
            }
            function submitAddr(){
                var addr = document.getElementById("input").value;
            }
            function myFunction(roomcode) {
                var txt;
                var name = prompt("Please enter your name:");
                var address;
                if (x_user == null && y_user == null) {
                    address = prompt("Please enter your address:");
                } else {
                    x.innerHTML = "Latitude: " + x_user +
                    "<br>Longitude: " + y_user;
                }
                // var address = prompt("Please enter your address:");
                // var roomCodeText;
                // if ((roomcode == null || roomcode == "") && (x_user == null)) {
                //     roomCodeText = prompt("Please enter your addressinside:");
                // } else {
                //     // roomCodeText = prompt("Please enter your address:", roomcode);
                // }
            }
        </script>
        <!-- AXP -->
    </body>

    <body onload="getLocation()">
        <p id = "errormsg"></p>
        <div id = "addressinput"></div>
    
    </body>

</html>
